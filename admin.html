<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Ask Krshn</title>
    <style>
        :root {
            --primary-color: #FF9800;
            --primary-dark: #F57C00;
            --primary-light: #FFE0B2;
            --secondary-color: #FFFFFF;
            --text-color: #333333;
            --light-text: #666666;
            --border-color: #E0E0E0;
            --success-color: #4CAF50;
            --error-color: #F44336;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f9f9f9;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 600;
        }

        .logo-icon {
            font-size: 2rem;
        }

        .admin-nav {
            display: flex;
            gap: 10px;
        }

        .admin-nav button {
            background-color: white;
            color: var(--primary-color);
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .admin-nav button:hover {
            background-color: var(--primary-light);
        }

        .admin-nav button.active {
            background-color: var(--primary-dark);
            color: white;
        }

        .login-container {
            max-width: 400px;
            margin: 3rem auto;
            background-color: var(--secondary-color);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .login-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: var(--primary-light);
        }

        .btn-danger {
            background-color: var(--error-color);
            color: white;
        }

        .btn-danger:hover {
            background-color: #d32f2f;
        }

        .admin-content {
            display: none;
            margin: 2rem 0;
        }

        .admin-content.active {
            display: block;
        }

        .section-title {
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }

        .chapter-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 1.5rem;
        }

        .chapter-tab {
            padding: 8px 16px;
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chapter-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .shlok-list {
            margin-bottom: 2rem;
        }

        .shlok-item {
            background-color: var(--secondary-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
        }

        .shlok-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .shlok-title {
            font-weight: 600;
            color: var(--primary-dark);
        }

        .shlok-actions {
            display: flex;
            gap: 10px;
        }

        .shlok-text {
            margin-bottom: 0.5rem;
        }

        .shlok-explanation {
            color: var(--light-text);
            font-style: italic;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 1rem;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }

        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .table th {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            font-weight: 600;
        }

        .table tr:hover {
            background-color: #f5f5f5;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 4px;
            margin-bottom: 1.5rem;
        }

        .alert-success {
            background-color: #E8F5E9;
            color: var(--success-color);
            border: 1px solid #C8E6C9;
        }

        .alert-error {
            background-color: #FFEBEE;
            color: var(--error-color);
            border: 1px solid #FFCDD2;
        }

        footer {
            background-color: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 10px;
            }

            .admin-nav {
                width: 100%;
                justify-content: center;
            }

            .form-row {
                flex-direction: column;
                gap: 1rem;
            }

            .shlok-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .shlok-actions {
                width: 100%;
                justify-content: flex-end;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üïâÔ∏è</span>
                    <h1>Ask Krshn - Admin Panel</h1>
                </div>
                <div class="admin-nav">
                    <button id="shlokManagerBtn" class="active">Shlok Manager</button>
                    <button id="greetingsManagerBtn">Greetings Manager</button>
                    <button id="feedbackViewerBtn">Feedback Viewer</button>
                    <button id="settingsManagerBtn">Settings</button>
                    <button id="logoutBtn">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Login Form (initially shown) -->
        <div id="loginContainer" class="login-container">
            <h2 class="login-title">Admin Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail" class="form-label">Email Address</label>
                    <input type="email" class="form-control" id="loginEmail" placeholder="admin@example.com" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword" class="form-label">Password</label>
                    <input type="password" class="form-control" id="loginPassword" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>
        </div>

        <!-- Admin Content (initially hidden) -->
        <div id="adminContent" style="display: none;">
            <!-- Shlok Manager -->
            <div id="shlokManager" class="admin-content active">
                <h2 class="section-title">Shlok Manager</h2>
                
                <div class="chapter-tabs" id="chapterTabs">
                    <!-- Chapter tabs will be generated by JavaScript -->
                </div>
                
                <div class="shlok-list" id="shlokList">
                    <!-- Shloks will be displayed here -->
                </div>
                
                <h3 class="section-title">Add New Shlok</h3>
                <form id="addShlokForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="shlokChapter" class="form-label">Chapter</label>
                            <select class="form-control" id="shlokChapter" required>
                                <!-- Options will be generated by JavaScript -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="shlokVerse" class="form-label">Verse</label>
                            <input type="number" class="form-control" id="shlokVerse" min="1" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="shlokText" class="form-label">Shlok Text</label>
                        <textarea class="form-control" id="shlokText" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="shlokExplanation" class="form-label">Explanation</label>
                        <textarea class="form-control" id="shlokExplanation" rows="4" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Shlok</button>
                </form>
            </div>

            <!-- Greetings Manager -->
            <div id="greetingsManager" class="admin-content">
                <h2 class="section-title">Greetings Manager</h2>
                
                <div id="greetingsList">
                    <!-- Greetings will be displayed here -->
                </div>
                
                <h3 class="section-title">Add New Greeting</h3>
                <form id="addGreetingForm">
                    <div class="form-group">
                        <label for="greetingTrigger" class="form-label">Trigger Phrase</label>
                        <input type="text" class="form-control" id="greetingTrigger" placeholder="e.g., Radhe Radhe" required>
                    </div>
                    <div class="form-group">
                        <label for="greetingReply" class="form-label">Reply</label>
                        <textarea class="form-control" id="greetingReply" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Add Greeting</button>
                </form>
            </div>

            <!-- Feedback Viewer -->
            <div id="feedbackViewer" class="admin-content">
                <h2 class="section-title">User Feedback</h2>
                
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Email</th>
                            <th>Feedback</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="feedbackTableBody">
                        <!-- Feedback will be displayed here -->
                    </tbody>
                </table>
            </div>

            <!-- Settings Manager -->
            <div id="settingsManager" class="admin-content">
                <h2 class="section-title">Settings</h2>
                
                <form id="settingsForm">
                    <div class="form-group">
                        <label for="donateQrUrl" class="form-label">Donate QR Code URL</label>
                        <input type="url" class="form-control" id="donateQrUrl" placeholder="https://example.com/qr-code.png">
                    </div>
                    <div class="form-group">
                        <label for="siteTitle" class="form-label">Site Title</label>
                        <input type="text" class="form-control" id="siteTitle" placeholder="Ask Krshn">
                    </div>
                    <div class="form-group">
                        <label for="welcomeMessage" class="form-label">Welcome Message</label>
                        <textarea class="form-control" id="welcomeMessage" rows="3" placeholder="Welcome message for users"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Save Settings</button>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2023 Ask Krshn. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Firebase configuration
        const firebaseConfig = {
  apiKey: "AIzaSyCqQqJWMl3naW8Ad8_lpoFQyuzSjTJs8N8",
  authDomain: "skater-13f74.firebaseapp.com",
  databaseURL: "https://skater-13f74-default-rtdb.firebaseio.com",
  projectId: "skater-13f74",
  storageBucket: "skater-13f74.firebasestorage.app",
  messagingSenderId: "750747470830",
  appId: "1:750747470830:web:2deefa64a23e45d3ae9cff"
};

        // Initialize Firebase (commented out for demo)
        // firebase.initializeApp(firebaseConfig);
        // const database = firebase.database();
        // const auth = firebase.auth();

        // Sample data for demonstration
        let adminData = {
            shloks: {
                chapter_1: {
                    verse_1: {
                        shlok: "Dhritarashtra said: O Sanjaya, assembled on the sacred plain of Kurukshetra, what did my sons and the sons of Pandu do, desiring to fight?",
                        explanation: "The first verse of the Bhagavad Gita introduces the setting and the anxious inquiry of King Dhritarashtra about the battle between his sons and the Pandavas."
                    },
                    verse_2: {
                        shlok: "Sanjaya said: O King, after looking over the army arranged in military formation by the sons of Pandu, King Duryodhana went to his teacher and spoke the following words.",
                        explanation: "Sanjaya begins his narration by describing Duryodhana's approach to his teacher Dronacharya upon seeing the Pandava army formation."
                    }
                },
                chapter_2: {
                    verse_1: {
                        shlok: "Sanjaya said: To him who had thus been overcome with pity, whose eyes were filled with tears and troubled, and who was despondent, the Destroyer of Madhu (Krishna) spoke these words.",
                        explanation: "At the beginning of Chapter 2, Lord Krishna notices Arjuna's despondency and begins to impart spiritual wisdom to guide him."
                    },
                    verse_2: {
                        shlok: "The Supreme Lord said: My dear Arjuna, how have these impurities come upon you? They are not at all befitting a man who knows the progressive values of life. They do not lead to higher planets, but to infamy.",
                        explanation: "Lord Krishna questions Arjuna's sudden weakness, pointing out that such despondency is unbecoming of a noble warrior and leads only to disgrace."
                    }
                }
            },
            greetings: {
                greeting_1: {
                    trigger: "Radhe Radhe",
                    reply: "Radhe Radhe! May your heart be filled with divine love and your path be illuminated by spiritual wisdom."
                },
                greeting_2: {
                    trigger: "Hare Krishna",
                    reply: "Hare Krishna! Welcome, dear soul. May the holy names bring peace and enlightenment to your life."
                },
                greeting_3: {
                    trigger: "Jai Shri Krishna",
                    reply: "Jai Shri Krishna! All glories to Lord Krishna. May His divine grace guide you on your spiritual journey."
                }
            },
            feedback: {
                feedback_1: {
                    email: "user@example.com",
                    message: "This is a wonderful application! It helped me understand the teachings of Bhagavad Gita better.",
                    timestamp: "2023-10-15T14:30:00Z"
                },
                feedback_2: {
                    email: "devotee@example.com",
                    message: "I would love to see more explanations for each verse. Great work overall!",
                    timestamp: "2023-10-14T09:15:00Z"
                }
            },
            meta: {
                donateQrUrl: "https://i.postimg.cc/9M6K5J9r/donate-qr.png",
                siteTitle: "Ask Krshn",
                welcomeMessage: "Hello! I am here to share the wisdom of Bhagavad Gita with you. Please ask your question."
            }
        };

        // DOM Elements
        const loginContainer = document.getElementById('loginContainer');
        const adminContent = document.getElementById('adminContent');
        const loginForm = document.getElementById('loginForm');
        const shlokManagerBtn = document.getElementById('shlokManagerBtn');
        const greetingsManagerBtn = document.getElementById('greetingsManagerBtn');
        const feedbackViewerBtn = document.getElementById('feedbackViewerBtn');
        const settingsManagerBtn = document.getElementById('settingsManagerBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const chapterTabs = document.getElementById('chapterTabs');
        const shlokList = document.getElementById('shlokList');
        const addShlokForm = document.getElementById('addShlokForm');
        const shlokChapterSelect = document.getElementById('shlokChapter');
        const greetingsList = document.getElementById('greetingsList');
        const addGreetingForm = document.getElementById('addGreetingForm');
        const feedbackTableBody = document.getElementById('feedbackTableBody');
        const settingsForm = document.getElementById('settingsForm');

        // Check if user is logged in (for demo purposes, we'll simulate login)
        let isLoggedIn = false;

        // Function to show admin content after login
        function showAdminContent() {
            loginContainer.style.display = 'none';
            adminContent.style.display = 'block';
            isLoggedIn = true;
            loadAdminData();
        }

        // Function to load admin data
        function loadAdminData() {
            loadChapterTabs();
            loadShloks('chapter_1');
            loadGreetings();
            loadFeedback();
            loadSettings();
        }

        // Function to load chapter tabs
        function loadChapterTabs() {
            chapterTabs.innerHTML = '';
            
            for (let i = 1; i <= 18; i++) {
                const tab = document.createElement('div');
                tab.className = `chapter-tab ${i === 1 ? 'active' : ''}`;
                tab.textContent = `Chapter ${i}`;
                tab.dataset.chapter = `chapter_${i}`;
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.chapter-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    loadShloks(`chapter_${i}`);
                });
                chapterTabs.appendChild(tab);
            }
            
            // Also populate the chapter select in the add form
            shlokChapterSelect.innerHTML = '';
            for (let i = 1; i <= 18; i++) {
                const option = document.createElement('option');
                option.value = `chapter_${i}`;
                option.textContent = `Chapter ${i}`;
                shlokChapterSelect.appendChild(option);
            }
        }

        // Function to load shloks for a chapter
        function loadShloks(chapter) {
            shlokList.innerHTML = '';
            
            if (adminData.shloks[chapter]) {
                const verses = Object.keys(adminData.shloks[chapter]).sort((a, b) => {
                    return parseInt(a.split('_')[1]) - parseInt(b.split('_')[1]);
                });
                
                verses.forEach(verse => {
                    const shlok = adminData.shloks[chapter][verse];
                    const shlokItem = document.createElement('div');
                    shlokItem.className = 'shlok-item';
                    shlokItem.innerHTML = `
                        <div class="shlok-header">
                            <div class="shlok-title">${chapter.replace('_', ' ')} - ${verse.replace('_', ' ')}</div>
                            <div class="shlok-actions">
                                <button class="btn btn-secondary edit-shlok" data-chapter="${chapter}" data-verse="${verse}">Edit</button>
                                <button class="btn btn-danger delete-shlok" data-chapter="${chapter}" data-verse="${verse}">Delete</button>
                            </div>
                        </div>
                        <div class="shlok-text">${shlok.shlok}</div>
                        <div class="shlok-explanation">${shlok.explanation}</div>
                    `;
                    shlokList.appendChild(shlokItem);
                });
            } else {
                shlokList.innerHTML = '<p>No shloks found for this chapter.</p>';
            }
            
            // Add event listeners for edit and delete buttons
            document.querySelectorAll('.edit-shlok').forEach(button => {
                button.addEventListener('click', (e) => {
                    const chapter = e.target.dataset.chapter;
                    const verse = e.target.dataset.verse;
                    editShlok(chapter, verse);
                });
            });
            
            document.querySelectorAll('.delete-shlok').forEach(button => {
                button.addEventListener('click', (e) => {
                    const chapter = e.target.dataset.chapter;
                    const verse = e.target.dataset.verse;
                    deleteShlok(chapter, verse);
                });
            });
        }

        // Function to edit a shlok
        function editShlok(chapter, verse) {
            const shlok = adminData.shloks[chapter][verse];
            
            // For demo purposes, we'll just show an alert
            alert(`Editing ${chapter} - ${verse}\n\nShlok: ${shlok.shlok}\n\nExplanation: ${shlok.explanation}\n\nIn a real application, this would open an edit form.`);
        }

        // Function to delete a shlok
        function deleteShlok(chapter, verse) {
            if (confirm(`Are you sure you want to delete ${chapter} - ${verse}?`)) {
                delete adminData.shloks[chapter][verse];
                loadShloks(chapter);
                alert('Shlok deleted successfully!');
            }
        }

        // Function to load greetings
        function loadGreetings() {
            greetingsList.innerHTML = '';
            
            if (Object.keys(adminData.greetings).length > 0) {
                Object.keys(adminData.greetings).forEach(greetingId => {
                    const greeting = adminData.greetings[greetingId];
                    const greetingItem = document.createElement('div');
                    greetingItem.className = 'shlok-item';
                    greetingItem.innerHTML = `
                        <div class="shlok-header">
                            <div class="shlok-title">Trigger: "${greeting.trigger}"</div>
                            <div class="shlok-actions">
                                <button class="btn btn-secondary edit-greeting" data-id="${greetingId}">Edit</button>
                                <button class="btn btn-danger delete-greeting" data-id="${greetingId}">Delete</button>
                            </div>
                        </div>
                        <div class="shlok-text">Reply: ${greeting.reply}</div>
                    `;
                    greetingsList.appendChild(greetingItem);
                });
            } else {
                greetingsList.innerHTML = '<p>No greetings found.</p>';
            }
            
            // Add event listeners for edit and delete buttons
            document.querySelectorAll('.edit-greeting').forEach(button => {
                button.addEventListener('click', (e) => {
                    const greetingId = e.target.dataset.id;
                    editGreeting(greetingId);
                });
            });
            
            document.querySelectorAll('.delete-greeting').forEach(button => {
                button.addEventListener('click', (e) => {
                    const greetingId = e.target.dataset.id;
                    deleteGreeting(greetingId);
                });
            });
        }

        // Function to edit a greeting
        function editGreeting(greetingId) {
            const greeting = adminData.greetings[greetingId];
            
            // For demo purposes, we'll just show an alert
            alert(`Editing greeting: "${greeting.trigger}"\n\nReply: ${greeting.reply}\n\nIn a real application, this would open an edit form.`);
        }

        // Function to delete a greeting
        function deleteGreeting(greetingId) {
            if (confirm('Are you sure you want to delete this greeting?')) {
                delete adminData.greetings[greetingId];
                loadGreetings();
                alert('Greeting deleted successfully!');
            }
        }

        // Function to load feedback
        function loadFeedback() {
            feedbackTableBody.innerHTML = '';
            
            if (Object.keys(adminData.feedback).length > 0) {
                Object.keys(adminData.feedback).forEach(feedbackId => {
                    const feedback = adminData.feedback[feedbackId];
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${new Date(feedback.timestamp).toLocaleDateString()}</td>
                        <td>${feedback.email || 'Not provided'}</td>
                        <td>${feedback.message}</td>
                        <td class="action-buttons">
                            <button class="btn btn-secondary view-feedback" data-id="${feedbackId}">View</button>
                            <button class="btn btn-danger delete-feedback" data-id="${feedbackId}">Delete</button>
                        </td>
                    `;
                    feedbackTableBody.appendChild(row);
                });
            } else {
                feedbackTableBody.innerHTML = '<tr><td colspan="4" style="text-align: center;">No feedback found.</td></tr>';
            }
            
            // Add event listeners for view and delete buttons
            document.querySelectorAll('.view-feedback').forEach(button => {
                button.addEventListener('click', (e) => {
                    const feedbackId = e.target.dataset.id;
                    viewFeedback(feedbackId);
                });
            });
            
            document.querySelectorAll('.delete-feedback').forEach(button => {
                button.addEventListener('click', (e) => {
                    const feedbackId = e.target.dataset.id;
                    deleteFeedback(feedbackId);
                });
            });
        }

        // Function to view feedback
        function viewFeedback(feedbackId) {
            const feedback = adminData.feedback[feedbackId];
            alert(`Feedback from: ${feedback.email || 'Anonymous'}\n\nDate: ${new Date(feedback.timestamp).toLocaleString()}\n\nMessage: ${feedback.message}`);
        }

        // Function to delete feedback
        function deleteFeedback(feedbackId) {
            if (confirm('Are you sure you want to delete this feedback?')) {
                delete adminData.feedback[feedbackId];
                loadFeedback();
                alert('Feedback deleted successfully!');
            }
        }

        // Function to load settings
        function loadSettings() {
            document.getElementById('donateQrUrl').value = adminData.meta.donateQrUrl || '';
            document.getElementById('siteTitle').value = adminData.meta.siteTitle || '';
            document.getElementById('welcomeMessage').value = adminData.meta.welcomeMessage || '';
        }

        // Event Listeners
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // For demo purposes, we'll accept any login
            // In a real application, this would authenticate with Firebase
            showAdminContent();
        });

        shlokManagerBtn.addEventListener('click', () => {
            document.querySelectorAll('.admin-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.admin-nav button').forEach(btn => btn.classList.remove('active'));
            shlokManagerBtn.classList.add('active');
            document.getElementById('shlokManager').classList.add('active');
        });

        greetingsManagerBtn.addEventListener('click', () => {
            document.querySelectorAll('.admin-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.admin-nav button').forEach(btn => btn.classList.remove('active'));
            greetingsManagerBtn.classList.add('active');
            document.getElementById('greetingsManager').classList.add('active');
        });

        feedbackViewerBtn.addEventListener('click', () => {
            document.querySelectorAll('.admin-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.admin-nav button').forEach(btn => btn.classList.remove('active'));
            feedbackViewerBtn.classList.add('active');
            document.getElementById('feedbackViewer').classList.add('active');
        });

        settingsManagerBtn.addEventListener('click', () => {
            document.querySelectorAll('.admin-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.admin-nav button').forEach(btn => btn.classList.remove('active'));
            settingsManagerBtn.classList.add('active');
            document.getElementById('settingsManager').classList.add('active');
        });

        logoutBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to logout?')) {
                // In a real application, this would sign out from Firebase
                adminContent.style.display = 'none';
                loginContainer.style.display = 'block';
                isLoggedIn = false;
                loginForm.reset();
            }
        });

        addShlokForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const chapter = document.getElementById('shlokChapter').value;
            const verse = `verse_${document.getElementById('shlokVerse').value}`;
            const shlokText = document.getElementById('shlokText').value;
            const explanation = document.getElementById('shlokExplanation').value;
            
            if (!adminData.shloks[chapter]) {
                adminData.shloks[chapter] = {};
            }
            
            adminData.shloks[chapter][verse] = {
                shlok: shlokText,
                explanation: explanation
            };
            
            loadShloks(chapter);
            addShlokForm.reset();
            alert('Shlok added successfully!');
        });

        addGreetingForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const trigger = document.getElementById('greetingTrigger').value;
            const reply = document.getElementById('greetingReply').value;
            
            const greetingId = `greeting_${Date.now()}`;
            adminData.greetings[greetingId] = {
                trigger: trigger,
                reply: reply
            };
            
            loadGreetings();
            addGreetingForm.reset();
            alert('Greeting added successfully!');
        });

        settingsForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const donateQrUrl = document.getElementById('donateQrUrl').value;
            const siteTitle = document.getElementById('siteTitle').value;
            const welcomeMessage = document.getElementById('welcomeMessage').value;
            
            adminData.meta.donateQrUrl = donateQrUrl;
            adminData.meta.siteTitle = siteTitle;
            adminData.meta.welcomeMessage = welcomeMessage;
            
            alert('Settings saved successfully!');
        });
    </script>
</body>
</html>